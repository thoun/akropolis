:root {
  --hex-side: 48.5px;
  --hex-height: 84px;
  --hex-thickness: 16px;
}

.hex {
  position: absolute;
  width: calc(var(--hex-side) * 2);
  height: var(--hex-height);
  left: calc(400px - var(--hex-side) + (var(--hex-side) * var(--x) * 1.5));
  top: calc(200px + (var(--hex-height) * var(--y) / 2));
  transform: translateZ(calc(var(--hex-thickness) * (var(--z) + 1)));

  .face {
    width: 100%;
    height: 100%;
    clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);

    &.possible {
      background: radial-gradient(rgba(255, 255, 255, 0.8), rgba(0, 255, 255, 0.5));

      // temp
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      button {
        width: auto;
        border: 1px solid gray;
        font-size: 11px;
        margin: 1px;
        cursor: pointer;
      }
    }

    &.temp {
      font-weight: bold;
      text-shadow: 0 0 1px white, 0 0 2px white, 0 0 3px white, 0 0 4px white, 0 0 5px white, 0 0 6px white;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    &[data-type] {
      background-image: url("img/sprite.png");
      background-size: auto 350%;
    }

    &[data-type="quarry"] {
      background-position: 66% 80%;
    }

    &[data-type="house"] {
      background-position: 66% 0%;
      &[data-plaza="true"] {
        background-position: 100% 20%;
      }
    }

    &[data-type="market"] {
      background-position: 66% 40%;
      &[data-plaza="true"] {
        background-position: 100% 60%;
      }
    }

    &[data-type="barrack"] {
      background-position: 33% 20%;
      &[data-plaza="true"] {
        background-position: 0% 0%;
      }
    }

    &[data-type="temple"] {
      background-position: 0% 80%;
      &[data-plaza="true"] {
        background-position: 33% 100%;
      }
    }

    &[data-type="garden"] {
      background-position: 0% 40%;
      &[data-plaza="true"] {
        background-position: 33% 60%;
      }
    }
  }

  .side {
    top: 50%;
    left: 50%;
    position: absolute;
    margin-left: -24px;
    margin-top: -8px;
    width: var(--hex-side);
    height: 16px;
    background: white;
    transform: translateZ(calc(var(--hex-thickness) * -0.5)) rotateX(90deg) rotateY(calc(60deg * var(--side))) translateZ(41.5px); /* almost hex-height / 2 */
    z-index: -100;
  }
}

.tile {
  position: absolute;
  /*width: 168px;
  height: 168px;
  transform-origin: 84px 97px;
  transition: transform 350ms ease-in-out;
  backface-visibility: hidden;
  border-radius: 50% 50% 35% 35%;
  will-change: transform;

  &::after {
    content: '';
    background: no-repeat url(img/tile-mask.png);
    background-size: cover;
    position: absolute;
    top: 1px;
    width: 168px;
    height: 168px;
    transform: translateZ(0.1px);
    backface-visibility: hidden;
    pointer-events: none
  }*/
}